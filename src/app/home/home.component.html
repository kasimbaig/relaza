<app-shared-layout>
  <div class="home-content">
    <!-- <div class="top-section"> -->
      <!-- Mission Statement -->
       <div class = "rows">
      <div class="mission-statement">
        <h2>MISSION STATEMENT</h2>
        <p>Provide Authoritative Decision Support towards Sustained Reliability & Combat Readiness of Indian Navy Platforms through Comprehensive Maintenance Management System.</p>
      </div>

      <!-- Search Bar -->
      <div class="search-row">
        <!-- <div class="anwesh-logo">A</div> -->
        <div class="search-input">
          <input type="text" placeholder="Anwesh Search" [(ngModel)]="searchQuery" name="searchQuery">
        </div>
        <button mat-mini-fab class="search-button" (click)="onSearch()">
          <mat-icon>search</mat-icon>
        </button>
      </div>

      <!-- CMMS-UM2 Login -->
      <div class="login-card">
        <h2>CMMS-UM2 LOGIN</h2>
        <div class="input-field">
          <mat-icon class="input-icon">person</mat-icon>
          <input type="text" placeholder="User Login" [(ngModel)]="userLogin" name="userLogin">
        </div>
        
        <div class="input-field">
          <mat-icon class="input-icon">lock</mat-icon>
          <input [type]="showPassword ? 'text' : 'password'" placeholder="Password" [(ngModel)]="password" name="password">
          <mat-icon class="input-icon password-toggle" (click)="togglePasswordVisibility()">
            {{ showPassword ? 'visibility' : 'visibility_off' }}
          </mat-icon>
        </div>
        
        <div class="login-buttons">
          <button class="login-btn" (click)="onLogin()">Login</button>
          <button class="new-user-btn" (click)="onNewUser()">New User</button>
        </div>
      </div>
    </div>

    <!-- Video Links -->
    <div class="video-rows">
      <button class="video-link-button" (click)="openVideoGallery('installation')">
        INSTALLATION VIDEOS
      </button>
      <button class="video-link-button" (click)="openVideoGallery('patch')">
        STEPS FOR UPDATING PATCH
      </button>
      <button class="video-link-button" (click)="openVideoGallery('sfd')">
        SFD, EMAPS & SRAR VIDEOS
      </button>
      <button class="video-link-button" (click)="openVideoGallery('dart')">
        DART, DL, OPDEF & FUSS VIDEOS
      </button>
    </div>
  </div>

  <!-- Add Form Component for Registration -->
  <app-add-form
    [open]="showRegistrationForm"
    [formConfig]="formConfig"
    [formData]="formData"
    [fromTitle]="'New User Registration'"
    [submitLabel]="'Register User'"
    [isSingleColumn]="false"
    (onOpenChange)="onFormOpenChange($event)"
    (onSubmit)="onRegistrationSubmit($event)"
  ></app-add-form>

  <!-- Video Gallery Dialog -->
  <div class="video-gallery-overlay" *ngIf="showVideoGallery" (click)="closeVideoGallery()">
    <div class="video-gallery-dialog" (click)="$event.stopPropagation()">
      <div class="video-gallery-header">
        <h2>VIDEO GALLERY</h2>
        <h3>{{ getSelectedCategoryTitle() }}</h3>
        <button class="close-btn" (click)="closeVideoGallery()">
          <mat-icon>close</mat-icon>
        </button>
      </div>
      
      <div class="video-grid">
        <div 
          *ngFor="let video of getSelectedCategoryVideos()" 
          class="video-item"
          (click)="downloadVideo(video.id, video.title)"
        >
          <h4>{{ video.title }}</h4>
        </div>
      </div>
    </div>
  </div>
</app-shared-layout>
